# Bash

> Arav Budhiraja | 28th March 2022

A shell is a program to interact with the OS. It is the command line interpreter which receives and understands commands from the user and sends them to the kernel for execution via system calls

Bash is a type of shell

Bash scripts are a list of commands which can be understood by the shell

File extension: `.sh`

# Executing a bash script

```bash
bash script.sh
OR
chmod +x script.sh # Give it executable perms
./script.sh
```

# Shabang line

All bash scripts start with a shabang line which is to indicate to the OS which program is to be used execute the code

```bash
#!/bin/bash
```

# Variables

- Local - Can only be used in the current terminal
- Environment - Can be used in any terminal
- Shell - Set by the shell and is required it to work

```bash
Syntax: variableName=value
```

**There must not be spaces between the = and variableName and between the = and value**

```bash
i=1 # Integer
d=1.3 # Decimal
s="Hello World!" # String
```

Variables can be referenced in other parts of the program by prepending a $ to the variableName

## Make variables read only

Readonly is a property which can be set to a variable to prevent its value from being changed again. Its value can only be read

```bash
Syntax: readonly variableName


readonly i
readonly secret
```

## Unsetting variables

Removing the current value of  avariable

```bash
Syntax: unset variableName

unset name
unset abcd
```

# Printing output

```bash
Syntax: echo $variableName or echo value

echo hi
echo Hello World!
echo 10

echo $a
echo $msg
echo "Your name is $name and your age is $age"
```

# Taking input

## read

```bash
Syntax: read variableToStoreData

read a
echo $a
```

You can also display a message when taking input using read

```bash
Syntax: read -p "Message" variableToStoreData

read -p "Enter your name: " name
```

## Positional arguments

```bash
./script.sh argument1 argument2 ...
```

These are values are stored in special variables which are from $0 to $9

```bash
     $0      $1    $2
./script.sh hello world

 $0     $1     $2  $3 $4
bash script.sh add 10 26
```

```bash
echo $0

a=$1+$2
echo$a
```


# Arrays

## Creating arrays

```bash
Syntax: arr=(el1 el2 el3 el4 el5)
```

```bash
Integers array: arrInt=(1 2 3 4 5 6 7 8)

Strings array: arrStr=("hello" "world" "how" "are" "you")
```

## Appending elements to an array

```bash
Syntax: arr+=(el1 el2 el3)
```

```bash
Integers array: arrInt+=(1 2 3 4)

Strings array: arrStr+=("hello" "world")
```



# Conditional statements

## Relational Operators

- -eq -> Checks if the values are equal 
- -ne -> Checks if the values are not equal
- -gt -> Checks if value1 is greater than value2
- -ge -> Checks if value1 is greater than or equal to value2
- -lt -> Checks if value1 is lesser than value2
- -le -> Checks if value1 is lesser than or equal to value2

All the above work for integers 

Only `-eq`  and `-ne`  work for strings

## if statement

```bash
Syntax:

if [ Condition ]
then
	Statements
fi

Condition = value1 <Relational Operator> value2 
```

```bash
if [ 1 -eq 1 ]
then
	echo "1 = 1!"
fi
```

## else statement

```bash
Syntax:

if [ Condition ]
then
	Statements
	
else
	Statements
	
fi
```

```bash
if [ $a -lt $b ]
then
	echo "$a is less than $b"
	
else
	echo "$a is greater than $b"
	
fi
```

## elif statement

```bash
Syntax:

if [ Condition ]
then
	Statements

elif [ Condition ]
then
	Statements

else
	Statements
	
fi
```

```bash
if [ $marks -ge 90 ]  
then  
 echo "Excellent"  
   
elif [ $marks -ge 70 ]  
then  
 echo "Good"  

elif [ $marks -ge 50 ]  
then  
 echo "Fine"  
   
else  
 echo "Bad"  
fi
```

**Note: When using variables in conditional statements, we have to enclose it in double quotes if there is a space in it**

```bash
a="hello world"

# Does not work
if [ $a == "hello world" ]
then
	echo "will not work"
fi

# Will work
if [ "$a" == "hello world" ]
then
	echo "will not work"
fi
```

## Logical operators

- And (&&)
- Or (||)

## And

```bash
read -p "Enter your username: " user
read -p "Enter your password: " pass

if [[ user -eq "arav" && pass -eq "hello123" ]]
then
	echo "Access granted!"
else
	echo "Invalid username/password :("
fi
```

## Or

```bash
read -p "Enter your age: " age
read -p "Enter your height in feet: " ht

if [[ age -ge 18 || ht -ge 4 ]]
then
	echo "You can get on the roller coaster"
else
	echo "You cannot get on the roller coaster :("
fi
```

## File operators

- -a or -e -> True if the file exists
- -d -> True if the file exists and it is a directory
- -g -> True if the file exists and the set-groupid property is set
- -h -> True if the file exists and is a symlink
- -k -> True if the file exists and and the sticky bit property
- -r -> True if the file exists and is readable by the current user
- -s -> True if the file exists and its size is greater than 0
- -u -> True if the file exists and the set-userid property is set
- -w -> True if the file exists and is writable by the current user
- -x -> True if the file exists and is executable by the current user
- -O -> True if the file exists and is owned by the current user. This is done by checking the user id associated with the file

```bash
f = "test.txt"

if [ -a $f ]
then
	echo "$f exists"
fi

if [ -d ".git" ]
then
	echo "The git directory exists"
fi

if [ -s $f ]
then 
	echo "$f's size is greater than 0"
fi

if [ -h $f ]
then
	echo "$f is a symlink"
fi

if [[ -r $f && -w $f && -x $f ]]
then
	echo "You can read, write andexecute $f"
fi

if [ -O $f ]
then
	echo "You own $f"
fi

if [[ -g $f && -k $f && $u ]]
then
	echo "$f has sticky bit, setuid and setgid properties set"
```

# Loops

- for
- while
- until

